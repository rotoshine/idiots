{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/home/winterwolf0412/workspace/idiots/pages/index.tsx\",\n    _s = $RefreshSig$();\n\nimport styles from './index.module.scss';\nimport React, { useEffect, useRef, useState } from 'react';\nimport Image from 'next/image';\nimport Layout from '../components/Layout';\nimport Meta from '../components/Meta';\nimport Container from '../components/Containter';\nimport { animated, config, useTransition } from 'react-spring';\nexport var __N_SSG = true;\nexport default function IndexPage(_ref) {\n  _s();\n\n  var _this = this;\n\n  var homeContent = _ref.homeContent;\n\n  var _useState = useState(0),\n      coverImageIndex = _useState[0],\n      setCoverImageIndex = _useState[1];\n\n  var indexRef = useRef(coverImageIndex);\n  var coverImages = homeContent === null || homeContent === void 0 ? void 0 : homeContent.carouselImages;\n  var transitions = useTransition(coverImages === null || coverImages === void 0 ? void 0 : coverImages[coverImageIndex], function (item) {\n    return (item === null || item === void 0 ? void 0 : item.id) || '';\n  }, {\n    from: {\n      opacity: 0\n    },\n    enter: {\n      opacity: 1\n    },\n    leave: {\n      opacity: 0\n    },\n    config: config.molasses\n  });\n  console.log(transitions);\n  useEffect(function () {\n    var _coverImages$length;\n\n    var MAX_INDEX = ((_coverImages$length = coverImages === null || coverImages === void 0 ? void 0 : coverImages.length) !== null && _coverImages$length !== void 0 ? _coverImages$length : 1) - 1;\n    var timeout = setInterval(function () {\n      if ((indexRef === null || indexRef === void 0 ? void 0 : indexRef.current) === MAX_INDEX) {\n        indexRef.current = 0;\n      } else {\n        indexRef.current = indexRef.current + 1;\n      }\n\n      setCoverImageIndex(indexRef.current);\n    }, 5000);\n    return function () {\n      if (timeout) {\n        clearInterval(timeout);\n      }\n    };\n  }, []);\n  console.log();\n  return /*#__PURE__*/_jsxDEV(Layout, {\n    className: styles.IndexPage,\n    children: [/*#__PURE__*/_jsxDEV(Meta, {\n      description: \"\\uB514\\uC9C0\\uD138 \\uC2F1\\uAE00 \\uC5B8\\uC81C\\uB098\\uC758 \\uBC1C\\uB9E4\\uC5D0 \\uC55E\\uC11C \\uCEE8\\uC149 \\uC77C\\uB7EC\\uC2A4\\uD2B8\\uC640 \\uC0C8 \\uAD7F\\uC988\\uB4E4\\uC744 \\uC18C\\uAC1C\\uD569\\uB2C8\\uB2E4! \\uD504\\uB85C\\uD544 \\uB9C1\\uD06C \\uB610\\uB294 \\uB9C8\\uD50C\\uC0F5\\uC5D0\\uC11C \\uBC34\\uB4DC \\uC774\\uB514\\uC5B4\\uCE20\\uB97C \\uAC80\\uC0C9\\uD574\\uC8FC\\uC138\\uC694\",\n      imageUrl: \"https://idiots.band/images/eonjena.png\",\n      imageWidth: 900,\n      imageHeight: 900\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n      className: styles['cover-image-carousel'],\n      children: transitions.map(function (_ref2) {\n        var item = _ref2.item,\n            props = _ref2.props,\n            key = _ref2.key;\n        return /*#__PURE__*/_jsxDEV(animated.div, {\n          className: styles['cover-image'],\n          style: props,\n          children: /*#__PURE__*/_jsxDEV(Image, {\n            src: \"https://idiots.roto.codes/\".concat(item === null || item === void 0 ? void 0 : item.url),\n            width: '100%',\n            alt: \"idiots cover image\",\n            layout: \"responsive\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 74,\n            columnNumber: 13\n          }, _this)\n        }, key, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 11\n        }, _this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Container, {\n      children: /*#__PURE__*/_jsxDEV(\"section\", {\n        className: styles.IndexPage__contents,\n        children: /*#__PURE__*/_jsxDEV(\"section\", {\n          className: styles.IndexPage__panels,\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles.IndexPage__newsPanels\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 86,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 58,\n    columnNumber: 5\n  }, this);\n}\n\n_s(IndexPage, \"WCmwQgb7eJnWj9EyeHhka+/KgJE=\", false, function () {\n  return [useTransition];\n});\n\n_c = IndexPage;\n\nvar _c;\n\n$RefreshReg$(_c, \"IndexPage\");","map":{"version":3,"sources":["/home/winterwolf0412/workspace/idiots/pages/index.tsx"],"names":["styles","React","useEffect","useRef","useState","Image","Layout","Meta","Container","animated","config","useTransition","IndexPage","homeContent","coverImageIndex","setCoverImageIndex","indexRef","coverImages","carouselImages","transitions","item","id","from","opacity","enter","leave","molasses","console","log","MAX_INDEX","length","timeout","setInterval","current","clearInterval","map","props","key","url","IndexPage__contents","IndexPage__panels","IndexPage__newsPanels"],"mappings":"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","sourcesContent":["import styles from './index.module.scss'\nimport React, { useEffect, useRef, useState } from 'react'\nimport axios from 'axios'\nimport Image from 'next/image'\n\nimport Layout from '../components/Layout'\nimport Meta from '../components/Meta'\nimport Container from '../components/Containter'\nimport { animated, config, useTransition } from 'react-spring'\nimport { GetStaticProps } from 'next'\n\ninterface Props {\n  homeContent: {\n    carouselImages: any\n  }\n}\n\nexport default function IndexPage({ homeContent }: Props) {\n  const [coverImageIndex, setCoverImageIndex] = useState(0)\n  const indexRef = useRef(coverImageIndex)\n\n  const coverImages = homeContent?.carouselImages\n\n  const transitions = useTransition(\n    coverImages?.[coverImageIndex],\n    item => item?.id || '',\n    {\n      from: { opacity: 0 },\n      enter: { opacity: 1 },\n      leave: { opacity: 0 },\n      config: config.molasses,\n    }\n  )\n\n  console.log(transitions)\n\n  useEffect(() => {\n    const MAX_INDEX = (coverImages?.length ?? 1) - 1\n    const timeout = setInterval(() => {\n      if (indexRef?.current === MAX_INDEX) {\n        indexRef.current = 0\n      } else {\n        indexRef.current = indexRef.current + 1\n      }\n      setCoverImageIndex(indexRef.current)\n    }, 5000)\n\n    return () => {\n      if (timeout) {\n        clearInterval(timeout)\n      }\n    }\n  }, [])\n\n  console.log()\n\n  return (\n    <Layout className={styles.IndexPage}>\n      <Meta\n        description=\"디지털 싱글 언제나의 발매에 앞서 컨셉\n        일러스트와 새 굿즈들을 소개합니다!\n        프로필 링크 또는 마플샵에서 밴드 이디어츠를 검색해주세요\"\n        imageUrl=\"https://idiots.band/images/eonjena.png\"\n        imageWidth={900}\n        imageHeight={900}\n      />\n      <section className={styles['cover-image-carousel']}>\n        {transitions.map(({ item, props, key }) => (\n          <animated.div\n            key={key}\n            className={styles['cover-image']}\n            style={props}\n          >\n            <Image\n              src={`https://idiots.roto.codes/${item?.url}`}\n              width={'100%'}\n              alt=\"idiots cover image\"\n              layout=\"responsive\"\n            />\n          </animated.div>\n        ))}\n      </section>\n      <Container>\n        <section className={styles.IndexPage__contents}>\n          <section className={styles.IndexPage__panels}>\n            <div className={styles.IndexPage__newsPanels}></div>\n          </section>\n        </section>\n      </Container>\n    </Layout>\n  )\n}\n\nexport const getStaticProps: GetStaticProps = async () => {\n  const res = await axios.get('https://idiots.roto.codes/home-contents')\n\n  return {\n    props: {\n      homeContent: res.data[0],\n    },\n    revalidate: 3000,\n  }\n}\n"]},"metadata":{},"sourceType":"module"}