{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/home/winterwolf0412/workspace/idiots/pages/index.tsx\";\nimport styles from './index.module.scss';\nimport React, { useEffect, useRef, useState } from 'react';\nimport axios from 'axios';\nimport Image from 'next/image';\nimport Layout from '../components/Layout';\nimport Meta from '../components/Meta';\nimport Container from '../components/Containter';\nimport { animated, config, useTransition } from 'react-spring';\nexport default function IndexPage({\n  homeContent\n}) {\n  const {\n    0: coverImageIndex,\n    1: setCoverImageIndex\n  } = useState(0);\n  const indexRef = useRef(coverImageIndex);\n  const coverImages = homeContent === null || homeContent === void 0 ? void 0 : homeContent.carouselImages;\n  const transitions = useTransition(coverImages === null || coverImages === void 0 ? void 0 : coverImages[coverImageIndex], item => (item === null || item === void 0 ? void 0 : item.id) || '', {\n    from: {\n      opacity: 0\n    },\n    enter: {\n      opacity: 1\n    },\n    leave: {\n      opacity: 0\n    },\n    config: config.molasses\n  });\n  useEffect(() => {\n    var _coverImages$length;\n\n    const MAX_INDEX = ((_coverImages$length = coverImages === null || coverImages === void 0 ? void 0 : coverImages.length) !== null && _coverImages$length !== void 0 ? _coverImages$length : 1) - 1;\n    const timeout = setInterval(() => {\n      if ((indexRef === null || indexRef === void 0 ? void 0 : indexRef.current) === MAX_INDEX) {\n        indexRef.current = 0;\n      } else {\n        indexRef.current = indexRef.current + 1;\n      }\n\n      setCoverImageIndex(indexRef.current);\n    }, 5000);\n    return () => {\n      if (timeout) {\n        clearInterval(timeout);\n      }\n    };\n  }, []);\n  return /*#__PURE__*/_jsxDEV(Layout, {\n    className: styles.IndexPage,\n    children: [/*#__PURE__*/_jsxDEV(Meta, {\n      description: \"\\uB514\\uC9C0\\uD138 \\uC2F1\\uAE00 \\uC5B8\\uC81C\\uB098\\uC758 \\uBC1C\\uB9E4\\uC5D0 \\uC55E\\uC11C \\uCEE8\\uC149 \\uC77C\\uB7EC\\uC2A4\\uD2B8\\uC640 \\uC0C8 \\uAD7F\\uC988\\uB4E4\\uC744 \\uC18C\\uAC1C\\uD569\\uB2C8\\uB2E4! \\uD504\\uB85C\\uD544 \\uB9C1\\uD06C \\uB610\\uB294 \\uB9C8\\uD50C\\uC0F5\\uC5D0\\uC11C \\uBC34\\uB4DC \\uC774\\uB514\\uC5B4\\uCE20\\uB97C \\uAC80\\uC0C9\\uD574\\uC8FC\\uC138\\uC694\",\n      imageUrl: \"https://idiots.band/images/eonjena.png\",\n      imageWidth: 900,\n      imageHeight: 900\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n      className: styles['cover-image-carousel'],\n      children: transitions.map(({\n        item,\n        props,\n        key\n      }) => /*#__PURE__*/_jsxDEV(animated.div, {\n        className: styles['cover-image'],\n        style: props,\n        children: /*#__PURE__*/_jsxDEV(Image, {\n          src: `https://idiots.roto.codes/${item === null || item === void 0 ? void 0 : item.url}`,\n          layout: \"fill\",\n          objectFit: \"cover\",\n          objectPosition: \"center\",\n          alt: \"idiots cover image\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 13\n        }, this)\n      }, key, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Container, {\n      children: /*#__PURE__*/_jsxDEV(\"section\", {\n        className: styles.IndexPage__contents,\n        children: /*#__PURE__*/_jsxDEV(\"section\", {\n          className: styles.IndexPage__panels,\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles.IndexPage__newsPanels\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 54,\n    columnNumber: 5\n  }, this);\n}\nexport const getStaticProps = async () => {\n  const homeContetsRes = await axios.get('https://idiots.roto.codes/home-contents');\n  const livesRes = await axios.get('https://idiots.roto.codes/lives?date_gte=2020-01-01&_sort=date:DESC');\n  return {\n    props: {\n      homeContent: homeContetsRes.data[0],\n      lives: livesRes.data\n    },\n    revalidate: 3000\n  };\n};","map":{"version":3,"sources":["/home/winterwolf0412/workspace/idiots/pages/index.tsx"],"names":["styles","React","useEffect","useRef","useState","axios","Image","Layout","Meta","Container","animated","config","useTransition","IndexPage","homeContent","coverImageIndex","setCoverImageIndex","indexRef","coverImages","carouselImages","transitions","item","id","from","opacity","enter","leave","molasses","MAX_INDEX","length","timeout","setInterval","current","clearInterval","map","props","key","url","IndexPage__contents","IndexPage__panels","IndexPage__newsPanels","getStaticProps","homeContetsRes","get","livesRes","data","lives","revalidate"],"mappings":"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","sourcesContent":["import styles from './index.module.scss'\nimport React, { useEffect, useRef, useState } from 'react'\nimport axios from 'axios'\nimport Image from 'next/image'\n\nimport Layout from '../components/Layout'\nimport Meta from '../components/Meta'\nimport Container from '../components/Containter'\nimport { animated, config, useTransition } from 'react-spring'\nimport { GetStaticProps } from 'next'\n\ninterface Props {\n  homeContent: {\n    carouselImages: any\n  }\n}\n\nexport default function IndexPage({ homeContent }: Props) {\n  const [coverImageIndex, setCoverImageIndex] = useState(0)\n  const indexRef = useRef(coverImageIndex)\n\n  const coverImages = homeContent?.carouselImages\n\n  const transitions = useTransition(\n    coverImages?.[coverImageIndex],\n    item => item?.id || '',\n    {\n      from: { opacity: 0 },\n      enter: { opacity: 1 },\n      leave: { opacity: 0 },\n      config: config.molasses,\n    }\n  )\n\n  useEffect(() => {\n    const MAX_INDEX = (coverImages?.length ?? 1) - 1\n    const timeout = setInterval(() => {\n      if (indexRef?.current === MAX_INDEX) {\n        indexRef.current = 0\n      } else {\n        indexRef.current = indexRef.current + 1\n      }\n      setCoverImageIndex(indexRef.current)\n    }, 5000)\n\n    return () => {\n      if (timeout) {\n        clearInterval(timeout)\n      }\n    }\n  }, [])\n\n  return (\n    <Layout className={styles.IndexPage}>\n      <Meta\n        description=\"디지털 싱글 언제나의 발매에 앞서 컨셉\n        일러스트와 새 굿즈들을 소개합니다!\n        프로필 링크 또는 마플샵에서 밴드 이디어츠를 검색해주세요\"\n        imageUrl=\"https://idiots.band/images/eonjena.png\"\n        imageWidth={900}\n        imageHeight={900}\n      />\n      <section className={styles['cover-image-carousel']}>\n        {transitions.map(({ item, props, key }) => (\n          <animated.div\n            key={key}\n            className={styles['cover-image']}\n            style={props}\n          >\n            <Image\n              src={`https://idiots.roto.codes/${item?.url}`}\n              layout=\"fill\"\n              objectFit=\"cover\"\n              objectPosition=\"center\"\n              alt=\"idiots cover image\"\n            />\n          </animated.div>\n        ))}\n      </section>\n      <Container>\n        <section className={styles.IndexPage__contents}>\n          <section className={styles.IndexPage__panels}>\n            <div className={styles.IndexPage__newsPanels}></div>\n          </section>\n        </section>\n      </Container>\n    </Layout>\n  )\n}\n\nexport const getStaticProps: GetStaticProps = async () => {\n  const homeContetsRes = await axios.get(\n    'https://idiots.roto.codes/home-contents'\n  )\n  const livesRes = await axios.get(\n    'https://idiots.roto.codes/lives?date_gte=2020-01-01&_sort=date:DESC'\n  )\n  return {\n    props: {\n      homeContent: homeContetsRes.data[0],\n      lives: livesRes.data,\n    },\n    revalidate: 3000,\n  }\n}\n"]},"metadata":{},"sourceType":"module"}