{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/home/winterwolf0412/workspace/idiots/pages/index.tsx\";\nimport styles from './index.module.scss';\nimport React, { useEffect, useRef, useState } from 'react';\nimport axios from 'axios';\nimport Image from 'next/image';\nimport Layout from '../components/Layout';\nimport Meta from '../components/Meta';\nimport Container from '../components/Containter';\nimport { animated, config, useTransition } from 'react-spring';\nexport default function IndexPage({\n  homeContent\n}) {\n  console.log(homeContent);\n  const {\n    0: coverImageIndex,\n    1: setCoverImageIndex\n  } = useState(0);\n  const indexRef = useRef(coverImageIndex);\n  const coverImages = homeContent === null || homeContent === void 0 ? void 0 : homeContent.carouselImages;\n  const transitions = useTransition(coverImages === null || coverImages === void 0 ? void 0 : coverImages[coverImageIndex], item => (item === null || item === void 0 ? void 0 : item.id) || '', {\n    from: {\n      opacity: 0\n    },\n    enter: {\n      opacity: 1\n    },\n    leave: {\n      opacity: 0\n    },\n    config: config.molasses\n  });\n  console.log(transitions);\n  useEffect(() => {\n    var _coverImages$length;\n\n    const MAX_INDEX = ((_coverImages$length = coverImages === null || coverImages === void 0 ? void 0 : coverImages.length) !== null && _coverImages$length !== void 0 ? _coverImages$length : 1) - 1;\n    const timeout = setInterval(() => {\n      if ((indexRef === null || indexRef === void 0 ? void 0 : indexRef.current) === MAX_INDEX) {\n        indexRef.current = 0;\n      } else {\n        indexRef.current = indexRef.current + 1;\n      }\n\n      setCoverImageIndex(indexRef.current);\n    }, 5000);\n    return () => {\n      if (timeout) {\n        clearInterval(timeout);\n      }\n    };\n  }, []);\n  console.log();\n  return /*#__PURE__*/_jsxDEV(Layout, {\n    className: styles.IndexPage,\n    children: [/*#__PURE__*/_jsxDEV(Meta, {\n      description: \"\\uB514\\uC9C0\\uD138 \\uC2F1\\uAE00 \\uC5B8\\uC81C\\uB098\\uC758 \\uBC1C\\uB9E4\\uC5D0 \\uC55E\\uC11C \\uCEE8\\uC149 \\uC77C\\uB7EC\\uC2A4\\uD2B8\\uC640 \\uC0C8 \\uAD7F\\uC988\\uB4E4\\uC744 \\uC18C\\uAC1C\\uD569\\uB2C8\\uB2E4! \\uD504\\uB85C\\uD544 \\uB9C1\\uD06C \\uB610\\uB294 \\uB9C8\\uD50C\\uC0F5\\uC5D0\\uC11C \\uBC34\\uB4DC \\uC774\\uB514\\uC5B4\\uCE20\\uB97C \\uAC80\\uC0C9\\uD574\\uC8FC\\uC138\\uC694\",\n      imageUrl: \"https://idiots.band/images/eonjena.png\",\n      imageWidth: 900,\n      imageHeight: 900\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n      className: \"cover-image-carousel\",\n      children: transitions.map(({\n        item,\n        props,\n        key\n      }) => /*#__PURE__*/_jsxDEV(animated.div, {\n        className: \"cover-image\",\n        style: props,\n        children: /*#__PURE__*/_jsxDEV(Image, {\n          src: item === null || item === void 0 ? void 0 : item.url,\n          width: '100%',\n          height: '100%',\n          alt: \"idiots cover image\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 13\n        }, this)\n      }, key, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Container, {\n      children: /*#__PURE__*/_jsxDEV(\"section\", {\n        className: \"IndexPage__contents\",\n        children: /*#__PURE__*/_jsxDEV(\"section\", {\n          className: \"IndexPage__panels\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"IndexPage__newsPanels\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 84,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 60,\n    columnNumber: 5\n  }, this);\n}\nexport const getStaticProps = async () => {\n  const res = await axios.get('https://idiots.roto.codes/home-contents');\n  return {\n    props: {\n      homeContent: res.data\n    },\n    revalidate: 3000\n  };\n};","map":{"version":3,"sources":["/home/winterwolf0412/workspace/idiots/pages/index.tsx"],"names":["styles","React","useEffect","useRef","useState","axios","Image","Layout","Meta","Container","animated","config","useTransition","IndexPage","homeContent","console","log","coverImageIndex","setCoverImageIndex","indexRef","coverImages","carouselImages","transitions","item","id","from","opacity","enter","leave","molasses","MAX_INDEX","length","timeout","setInterval","current","clearInterval","map","props","key","url","getStaticProps","res","get","data","revalidate"],"mappings":"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","sourcesContent":["import styles from './index.module.scss'\nimport React, { useEffect, useRef, useState } from 'react'\nimport axios from 'axios'\nimport Image from 'next/image'\n\nimport Layout from '../components/Layout'\nimport Meta from '../components/Meta'\nimport Container from '../components/Containter'\nimport { animated, config, useTransition } from 'react-spring'\nimport { GetStaticProps } from 'next'\n\n\ninterface Props {\n  homeContent: {\n    carouselImages: any\n  }\n}\n\nexport default function IndexPage({ homeContent }: Props) {\n  console.log(homeContent)\n  const [coverImageIndex, setCoverImageIndex] = useState(0)\n  const indexRef = useRef(coverImageIndex)\n\n  const coverImages = homeContent?.carouselImages\n\n  const transitions = useTransition(\n    coverImages?.[coverImageIndex],\n    item => item?.id || '',\n    {\n      from: { opacity: 0 },\n      enter: { opacity: 1 },\n      leave: { opacity: 0 },\n      config: config.molasses,\n    }\n  )\n\n  console.log(transitions)\n\n  useEffect(() => {\n    const MAX_INDEX = (coverImages?.length ?? 1) - 1\n    const timeout = setInterval(() => {\n      if (indexRef?.current === MAX_INDEX) {\n        indexRef.current = 0\n      } else {\n        indexRef.current = indexRef.current + 1\n      }\n      setCoverImageIndex(indexRef.current)\n    }, 5000)\n\n    return () => {\n      if (timeout) {\n        clearInterval(timeout)\n      }\n    }\n  }, [])\n\n  console.log()\n\n  return (\n    <Layout className={styles.IndexPage}>\n      <Meta\n        description=\"디지털 싱글 언제나의 발매에 앞서 컨셉\n        일러스트와 새 굿즈들을 소개합니다!\n        프로필 링크 또는 마플샵에서 밴드 이디어츠를 검색해주세요\"\n        imageUrl=\"https://idiots.band/images/eonjena.png\"\n        imageWidth={900}\n        imageHeight={900}\n      />\n      <section className=\"cover-image-carousel\">\n        {transitions.map(({ item, props, key }) => (\n          <animated.div key={key} className=\"cover-image\" style={props}>\n            <Image\n              src={item?.url}\n              width={'100%'}\n              height={'100%'}\n              alt=\"idiots cover image\"\n            />\n          </animated.div>\n        ))}\n      </section>\n      <Container>\n        <section className=\"IndexPage__contents\">\n          <section className=\"IndexPage__panels\">\n            <div className=\"IndexPage__newsPanels\">\n\n            </div>\n          </section>\n        </section>\n      </Container>\n    </Layout>\n  )\n}\n\nexport const getStaticProps: GetStaticProps = async() => {\n  const res = await axios.get('https://idiots.roto.codes/home-contents')\n\n  return {\n    props: {\n      homeContent: res.data\n    },\n    revalidate: 3000\n  }\n}"]},"metadata":{},"sourceType":"module"}